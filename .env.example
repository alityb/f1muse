# F1 Muse API Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# DATABASE CONNECTION (REQUIRED)
# =============================================================================

# Local PostgreSQL:
# DATABASE_URL=postgresql://readonly_user:password@localhost:5432/f1muse

# Supabase (SSL enabled automatically):
# DATABASE_URL=postgresql://user:password@db.xxxxxxxxxxxx.supabase.co:5432/postgres
# Note: URL-encode special characters in password: ! = %21, # = %23, $ = %24, * = %2A

# Test database (optional - defaults to DATABASE_URL):
# TEST_DATABASE_URL=postgresql://...

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

PORT=3000
NODE_ENV=production

# =============================================================================
# CLAUDE API (REQUIRED for /nl-query endpoint)
# =============================================================================

# Anthropic API key - get it from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-...

# Alternative name (either works):
# CLAUDE_API_KEY=sk-ant-api03-...

# =============================================================================
# REDIS CACHE (OPTIONAL - graceful degradation if not available)
# =============================================================================

# Local Redis:
# REDIS_URL=redis://localhost:6379

# Redis with password:
# REDIS_URL=redis://:password@host:6379

# Production (Redis Cloud, AWS ElastiCache, etc.):
# REDIS_URL=redis://user:password@redis-host:6379

# =============================================================================
# DEVELOPER NOTES
# =============================================================================

# Using psql with .env:
#   The shell doesn't auto-load .env files. To use psql:
#
#   Option A - Export manually:
#     export $(grep -v '^#' .env | xargs)
#     psql "$DATABASE_URL" -c "select 1;"
#
#   Option B - One-liner:
#     eval $(grep DATABASE_URL .env) psql "$DATABASE_URL" -c "select 1;"
#
# SSL Notes:
#   - Supabase connections automatically use SSL (ssl: { rejectUnauthorized: false })
#   - For other providers, add ?sslmode=require to the connection string

# =============================================================================
# COST ESTIMATION (Claude API)
# =============================================================================
#
# Claude 3.5 Sonnet pricing (as of 2024):
#   - Input: $3 / 1M tokens
#   - Output: $15 / 1M tokens
#
# Estimated per query:
#   - System prompt: ~2000 tokens (input)
#   - User question: ~50 tokens (input)
#   - Response: ~100 tokens (output)
#
# Cost per query: ~$0.008 (0.8 cents)
# Cost per 1000 queries: ~$8
#
# With Redis caching:
#   - Cache hit rate: ~30-50% (repeated queries)
#   - Effective cost per 1000 queries: ~$5
